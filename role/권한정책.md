## 정책 정의

### 📋 발주(PO) 모듈 권한 정책

| API 엔드포인트 | 기능 | 허용 역할 | 비고 |
| --- | --- | --- | --- |
| `GET /api/v1/purchase-orders` | 목록 조회 | **BUYER** | 구매팀만 조회 가능 |
| `GET /api/v1/purchase-orders/pending` | 발주대기 조회 | **BUYER** | 견적 선정 완료건 |
| `GET /api/v1/purchase-orders/{no}` | 상세 조회 | **BUYER, VENDOR** | VENDOR는 본인 발주만 |
| `POST /api/v1/purchase-orders` | 발주 등록 | **BUYER** | 구매팀만 생성 |
| `PUT /api/v1/purchase-orders/{no}` | 발주 수정 | **BUYER** | 발주전송 전만 수정 가능 |
| `DELETE /api/v1/purchase-orders/{no}` | 발주 삭제 | **BUYER** | 임시저장 상태만 삭제 |
| `POST /api/v1/purchase-orders/{no}/confirm` | 발주 확정 | **BUYER** | 상태: T → D |
| `POST /api/v1/purchase-orders/{no}/approve` | 발주 승인 | **BUYER** | 상태: D → A |
| `POST /api/v1/purchase-orders/{no}/reject` | 발주 반려 | **BUYER** | 상태: → R |
| `POST /api/v1/purchase-orders/{no}/send` | 발주 전송 | **BUYER** | 상태: A → S (협력사에 전송) |
| `POST /api/v1/purchase-orders/{no}/close` | 발주 종결 | **BUYER** | 상태: C → E |
| `PUT /api/v1/purchase-orders/{no}/vendor-confirm` | 협력사 수신확인 | **VENDOR** | CHECK_FLAG: N → Y |

### 📦 입고(GR) 모듈 권한 정책

| API 엔드포인트 | 기능 | 허용 역할 | 비고 |
| --- | --- | --- | --- |
| `GET /api/v1/goods-receipts/pending` | 입고대상 조회 | **BUYER** | 발주전송 완료건 |
| `GET /api/v1/goods-receipts` | 입고목록 조회 | **BUYER** | 입고 현황 |
| `GET /api/v1/goods-receipts/{grNo}` | 입고 상세 | **BUYER** |  |
| `POST /api/v1/goods-receipts` | 입고 등록 | **BUYER** | GR 신규 생성 |
| `PUT /api/v1/goods-receipts/{grNo}/items/{itemCode}` | 입고조정(수정) | **BUYER** | 수량/금액 조정 |
| `POST /api/v1/goods-receipts/{grNo}/items/{itemCode}/cancel` | 입고취소 | **BUYER** | STATUS_CD: N → C |

## 핵심 포인트

### 1️⃣ **Role 기반 권한**

- **BUYER**: 구매팀 - 발주/입고 모든 작업 가능
- **VENDOR**: 협력사 - 발주서 조회 + 수신확인만 가능
- **USER**: 일반 직원 - 발주/입고 관련 권한 없음 (구매요청만 가능)
- **ADMIN**: 관리자 - 모든 권한 (필요시)

### 2️⃣ **협력사(VENDOR) 특별 처리**

- 발주 상세 조회는 가능하지만, **본인 회사 발주만 조회**해야 함
- Service 레이어에서 `SessionUser.vendorCd`와 `PO.VENDOR_CD` 일치 여부 확인 필요

### 3️⃣ **상태 기반 제어**

- 권한만으로는 부족하고, **PROGRESS_CD에 따른 상태 전이 체크** 필요
- 예: 발주 수정은 BUYER지만 `PROGRESS_CD = 'T'(임시저장)` 상태에서만 가능