**현재 문제점**

- 입고 대상 목록이 **PO 단위**로 묶여서, 입고 처리를 하려면 PO를 선택하고 전체 품목을 한 번에 처리해야 합니다.
- 하지만 실제 입고는 **품목별**로 이루어지므로, 목록 자체가 **PO 단위가 아닌 품목 단위**로 펼쳐져 있어야 합니다.
- (예: PO2601160008의 모니터 15개, 거치대 15개가 각각 별도의 행으로 보여야 각각 선택해서 입고 잡을 수 있음)

**[변경 전: PO 그룹]**

```
▶ ☐ PO2601160008 | 개발팀 모니터 구매 | ... (2개 품목)
    └─ ITM-005 | 27인치 모니터 | 15개
    └─ ITM-006 | 모니터 거치대 | 15개

```

### **입고 프로세스 리팩토링**

### **1. 입고 대상 조회 (`/inventory/receiving-target`)**

**핵심 변경 사항**

- PO 그룹핑을 제거하고 `PO번호 + 품목` 정보를 한 행에 평탄화(Flatten)하여 표시.
- **잔여수량(`remainingQuantity`)** 표시: 발주수량 - 기입고수량
- **Validation**: 체크박스 선택 시, **동일 PO의 품목만 함께 선택**되도록 제한.

**주요 코드 (Frontend)**

```tsx
// PO 데이터를 품목 단위로 평탄화 (Flatten)
const flatItems: ReceivingTargetItem[] = [];
result.forEach((po: PendingPODTO) => {
  po.items.forEach((item) => {
    // 잔여 수량이 0 이하면 목록 제외 (완료된 건)
    const remainingQty = item.remainingQuantity ?? (item.orderQuantity || 0);
    if (remainingQty <= 0) return;
    flatItems.push({
      id: `${po.poNo}_${item.itemCode}`, // 고유 키 생성
      poNo: po.poNo,
      itemCode: item.itemCode,
      itemName: item.itemName,
      remainingQuantity: remainingQty, // 잔여수량 중요
      // ... 기타 필드
    });
  });
});
```

```tsx
// 유효성 검사: 동일 PO만 선택 가능
const toggleSelectItem = (id: string, poNo: string) => {
  if (selectedItemIds.size > 0 && !selectedItemIds.has(id)) {
    // 이미 선택된 첫 번째 아이템의 PO 번호 확인
    const firstItem = targetItems.find(item => item.id === Array.from(selectedItemIds)[0]);
    if (firstItem && firstItem.poNo !== poNo) {
      alert('동일한 발주번호의 품목만 함께 선택할 수 있습니다.');
      return;
    }
  }
  // ... 선택 로직
};
```

---

### **2. 입고 현황 조회 (`/inventory/receiving-list`)**

**핵심 변경 사항**

- GR 헤더 그룹핑 제거, 입고된 품목들이 시간/번호순으로 나열됨.
- 리스트에서 바로 **[입고조정/취소]** 버튼을 통해 수정 팝업 진입 (Depth 축소).

**주요 코드 (Frontend)**

```tsx
// 입고 조정 버튼 핸들러
const handleAdjust = async () => {
  // 선택된 품목 가져오기
  const selectedId = Array.from(selectedItemIds)[0];
  const row = data.find(item => item.id === selectedId);
  // 조정 팝업 초기화 (상세 모달 재활용)
  setAdjustQuantity(row.receivedQuantity);
  setIsAdjustMode(true); // 조정 모드 활성화
  setIsDetailModalOpen(true);
};
```

## **장점**

1. **클릭 횟수 감소**: 불필요한 접기/펼치기 없이 바로 품목 확인 가능
2. **명확한 작업 단위**: 실제 입고 작업 단위인 '품목'을 기준으로 UI 구성
3. **일관성**: `입고 대상 -> 입고 처리 -> 입고 현황` 전 과정이 품목 단위로 통일됨